# HD (Hierarchical Deterministic)

RaptoreumCore supports Bip 39/44 and Hierarchical Deterministic (HD) wallet, it is not on by default. This allows you to recover your wallet with a 24 word seed and also protect that seed with a password (optional).

## HD Mode Benefits
HD Wallets are now often preferred here are some reasons why:

- Single Backup: Only one backup is needed, which is the mnemonic seed phrase. This single seed can recreate all the keys in the wallet.
- Ease of Use: Users only need to remember or securely store a single seed phrase. If the wallet is lost or the device is damaged, the seed phrase can restore the entire wallet.
- Addresses: They can generate a nearly infinite number of addresses from a single seed.
- Master Seed Control: The security of the wallet is centered around the master seed. If the seed is kept secure, all keys derived from it are also secure.
- BIP Standards: Raptoreumcore HD follows BIP39/BIP44 standards, ensuring security and compatibility with other systems.

At this time Raptoreumcore does not start in HD mode by default.

## Terms

- HD Wallet (Hierarchical Deterministic Wallet): Wallet that generates a tree of keys from a single seed, allowing for easy backup and management.
- Mnemonic Seed (Seed Phrase): A human-readable set of words (usually 12, 18, or 24) generated by the wallet that can be used to restore the wallet.
- Mnemonic Passphrase (BIP39 Passphrase): An optional additional passphrase that can be set to provide an extra layer of security to the mnemonic seed.
- Master Seed: The original seed from which all private keys are derived in an HD wallet.

## Encryption
Do not confuse Mnemonic Seed Phrase or Mnemonic Passphrase with wallet encryption, they are not the same thing. You should still encrypt your wallet so it requires a password to perform sensitive functions such as send RTM, assets, or dump your wallet info.

>Note: This document requires using Console. If at any time you want more information on a command, simply preceed the command with "help". 

## How To Use HD Mode (clean install)
"Clean" means first time wallet has been started no wallet files have previously been created. 
In order to do this you must start Raptoreum-qt from terminal with the `-usehd=1` flag.

Start the wallet on Windows and set mnemonic passphrase:
```bash
./raptoreum-qt.exe --usehd=1 --mnemonicpassphrase="passphrase-here"
```

Start the wallet on Linux, macOS, ARMx64 and set mnemonic passphrase:
```bash
./raptoreum-qt usehd=1 --mnemonicpassphrase="passphrase-here"
```

Now to make HD mode persistant when restarting the wallet you must add usedhd=1 to raptoreum.conf in the data directory. If this file does not exists, create it.

>Note:
>Make sure to save your mnemonic passphrase in multiple safe locations. If you lose it you cannot restore your wallet from seed phrase. 

If you prefer not to protect your seed phrase with a password remove "--mnemonicpassphrase="passphrase-here"" from the above commands.

## Get The Seed Phrase
Now you need to get the seed phrase and record it in at least one safe location, if you lose this you cannot restore your wallet! Open the wallet and go to Window > Console and type: `gethdinfo`

Record the 24 word "mnemonic", this is also another chance to record your mnemonic passphrase if you forgot on the previous step as it will be displayed.

## Encrypt The Wallet
You should also now encrypt your wallet by going to Settings > Encrypt Wallet. This will stop the wallet from performing sensitive functions such as sending RTM until the password is entered.


## Upgrade Wallet To HD
During upgrade you can set a 24 word mnemonic seed or let the wallet generate one. You can also set a mnemonic pass phrase. you will need your wallet passphrase if it is encrypted.

## Upgrade and Set Mnemonic Passphrase

Go to Window > Console, and issue this command:
```bash
upgradetohd "" "your_mnemonic_passphrase" "your_wallet_passphrase"
```

## Get Mnemonic Seed
If your wallet is encrypted you will need to unlock it first:
```bash
walletpassphrase password-here time-in-seconds
```

Now do:
```bash
dumphdinfo
```

>Warning:
>As this is an upgrade your wallet.dat will contain keys not derived from the seed. You need to make sure you take a new backup of it and keep that backup safe. 